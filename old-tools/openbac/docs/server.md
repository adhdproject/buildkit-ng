#Server Documentation

###Description

One of the utilities included with this library is the openbac server (server.py).  It implements the openbac library and has a simple API you can use to access it.

###Configuration
All of the configuration is accomplished inside the file openbac.conf.  There is decent commenting inside the file to help you figure out what all you need to change.  But you really shouldn't have to change much of anything at all.

There are two things that may need configuring. The first is the pointerlengths setting.  This will change when you generate a new array and must be mapped to relate to the size of the array.  The second is the whitelist.  Server.py only accepts connections from approved hosts.  Best case scenario, you are just running server.py on the same machine as your web application, over the loopback interface, and your whitelist reads "127.0.0.1".



###API

You can run the server with a simple **`./server.py`**.  By default it listens on port 2337 and implements an API over http.

It wraps communication with SSL using a self signed certificate.  If you want to call the API over the network it is **HIGHLY** recommended that you find a way to verify the certificate otherwise the data you send could be intercepted.  And that would almost certainly be terribly insecure.  So just find a way to do it inside your application.  Please.

server.py will generate a certificate for you automatically if it doesn't detect one at the location specified in the configuration file (openbac.conf).  

The API has three calls.

* au
* mk
* up

Each of these calls is simply a wrapper around a function in the openbac library.

**`au`** ==> authentication

**`mk`** ==> generate

**`up`** ==> unpack

You can read more about these functions and how they work in the documentation for the library (openbac.md).

###au
Authentication calls look like this:

		localhost:2337/?au=<unpacked_plaintext>

This should be the value generated by the library or a call to **mk**.

It will return True or False based on if the information is correct.

###mk
Generate calls look like this:

		localhost:2337/?mk=<pass_value>

This will return a hash object just like the generate function does.

###up
Unpack calls look like this:

		localhost:2337/?up=<hash_value>&passwd=<user_passwd>

This will return True or False based on if the passwd value is correct for the hash.  (It automatically calls the authentication function after unpacking).

These simple GET requests are all you need to implement Ball and Chain in your application.  You that way even if you don't have a way to import the Python library you can run the server and make calls to it.


